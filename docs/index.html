<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>EXSE.eu TV Stream</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">		
		<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/dark-hive/jquery-ui.css">
		<script src="//code.jquery.com/jquery-1.12.4.js"></script>
		<script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
		<link rel="shortcut icon" href="favicon.ico">
		<link rel="icon" type="image/png" href="favicon.png" sizes="32x32">
		<link href="//unpkg.com/video.js/dist/video-js.css" rel="stylesheet">
		<script src="//unpkg.com/video.js/dist/video.js"></script>
		<script src="//unpkg.com/videojs-contrib-hls/dist/videojs-contrib-hls.js"></script>
		<script src="/videojs-contrib-quality-levels.min.js"></script>
		<meta name="description" content="exse.eu Desktopstream Twitterfeed Breaking News"/>
		<meta property="og:image" content="https://exse.eu/bg.jpg" />
		<script src="/js.cookie.js"></script>
		<script src="/socket.io/socket.io.js"></script>
		<script>
			const socket = io();

			$(document).ready(function(){
				$('.right').css('height', $(window).height());

				var player = videojs('my_video_1');


				$( "#radio" ).controlgroup();
			
				console.log(Cookies.get('qual'));

			//	if(Cookies.get('qual') === "ld")
			//		$("#radio-2").prop("checked", true)
			//	else if(Cookies.get('qual') === "sd")
			//		$("#radio-3").prop("checked", true)
			//	else if(Cookies.get('qual') === "hd")
			//		$("#radio-4").prop("checked", true)
			//	else
					$("#radio-1").prop("checked", true);
				
				
				$( "#radio" ).controlgroup( "refresh" );

				

				function update_level() {
							
					if( $("#radio-1").is(":checked")) Cookies.set('qual', 'auto');
					if( $("#radio-2").is(":checked")) Cookies.set('qual', 'ld');
					if( $("#radio-3").is(":checked")) Cookies.set('qual', 'sd');
					if( $("#radio-4").is(":checked")) Cookies.set('qual', 'hd');

					var levels = player.qualityLevels();
					
					for (var i = 0; i < levels.length; i++) {
						let qualityLevel = levels[i];
						qualityLevel.enabled=true;
					}
					
					for (var i = 0; i < levels.length; i++) {
						let qualityLevel = levels[i];
						
						if(qualityLevel.bitrate > 1500000){

							if( $("#radio-1").is(":checked") || $("#radio-4").is(":checked") )
								qualityLevel.enabled=true
							else
								qualityLevel.enabled=false;

						}
						else if(qualityLevel.bitrate > 500000){
							if( $("#radio-1").is(":checked") || $("#radio-4").is(":checked") || $("#radio-3").is(":checked") )
								qualityLevel.enabled=true
							else
								qualityLevel.enabled=false;
						}
					}

				}



				var levels = player.qualityLevels();
				levels.on('addqualitylevel', update_level);

				$( "#radio-1" ).on("change",update_level);
				$( "#radio-2" ).on("change",update_level);
				$( "#radio-3" ).on("change",update_level);
				$( "#radio-4" ).on("change",update_level);


			});
		
			$(window).resize(function(){
				$('.right').css('height', $(window).height());
			});

		</script>
		<style>
			body { 
				margin: 0px auto;overflow: hidden;
				font-family: Arial, Helvetica, sans-serif;
				font-size:10px;
				background: #e8f6fe;
				color: white;
			};
			@media (orientation: portrait) {
				html {
					transform: rotate(-90deg);
					transform-origin: left top;
					width: 100vh;
					overflow-x: hidden;
					position: absolute;
					top: 100%;
					left: 0;
				}
			}

			.container {
				height: auto;
				overflow: hidden;
			}

			.right {
				width: 350px;
				float: right;
				height:auto;
			}

			.left {
				float: none; /* not needed, just for clarification */
				/* the next props are meant to keep this block independent from the other floated one */
				width: auto;
				overflow: hidden;
				}

			.video {
				width: 100%;
			};
		</style>

	</head>

	<body style="background:#111111">
		<div class="container">
			<div class="right">
				<div id="tlkio" data-channel="sebgreen" data-theme="theme--night" style="width:350px;height:100%"></div><script async src="https://tlk.io/embed.js" type="text/javascript"></script>
			</div>
			<div class="left">
				<div class="video">
					<video id="my_video_1" class="video-js vjs-default-skin  vjs-16-9" autoplay controls preload="auto" data-setup="{'enableLowInitialPlaylist':true}">
						<source src="/mytv2/live.m3u8"  type="application/x-mpegURL">
					</video>
				</div>
					
				<div id="radio" style="margin:5px;">
					<label for="radio-1">Auto</label>
					<input type="radio" name="radio-0" id="radio-1">
					<label for="radio-2">LOW</label>
					<input type="radio" name="radio-0" id="radio-2">
					<label for="radio-3">M</label>
					<input type="radio" name="radio-0" id="radio-3">
					<label for="radio-4">HD</label>
					<input type="radio" name="radio-0" id="radio-4">
				</div>
				
				<div style="margin:5px;"><script src="https://apis.google.com/js/platform.js"></script>
					Seb Green 1: <div class="g-ytsubscribe" data-channelid="UCaxGY-scK6rRDAR3JCwJunQ" data-layout="default" data-theme="dark" data-count="default"></div>
				</div>
				<div style="margin:5px;"><script src="https://apis.google.com/js/platform.js"></script>
					Seb Green 2: <div class="g-ytsubscribe" data-channelid="UCwh0lnHydcE9Ikdjj5X6z6A" data-layout="default" data-theme="dark" data-count="default"></div>
				</div>
			</div>
		</div>
		<script>
		</script>
	</body>
</html>

